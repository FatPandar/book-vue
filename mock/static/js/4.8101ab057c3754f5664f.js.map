{"version":3,"sources":["webpack:///src/components/List.vue","webpack:///./src/components/List.vue?4787","webpack:///./src/components/List.vue"],"names":["List","created","this","getData","data","list","offset","hasMore","methods","add","book","$store","commit","mutations_type","remove","id","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","Object","api","filter","item","bookId","stop","_this2","_callee2","_ref","books","_context2","sent","concat","toConsumableArray_default","more","getMore","_$refs$list","$refs","scrollHeight","scrollTop","clientHeight","computed","components","Header","components_List","render","_vm","_h","$createElement","_c","_self","attrs","back","_v","ref","staticClass","on","scroll","_l","index","key","to","name","params","bid","tag","directives","rawName","value","expression","_s","bookName","bookInfo","bookPrice","click","$event","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.8101ab057c3754f5664f.js","sourcesContent":["<template>\n    <div>\n      <Header :back=\"false\">列表</Header>\n      <div class=\"box\" @scroll=\"getMore\" ref=\"list\">\n        <ul>\n          <router-link v-for=\"(item,index) in list\" :to=\"{name:'detail',params:{bid:item.bookId}}\" :key=\"index\" tag=\"li\">\n            <img v-lazy=\"item.bookPic\">\n            <div>\n              <h5>{{item.bookName}}</h5>\n              <p>{{item.bookInfo}}</p>\n              <b>￥{{item.bookPrice}}</b>\n              <div>\n                <button @click.stop=\"remove(item.bookId)\">删除</button>\n                <button @click.stop=\"add(item)\" class=\"cart\">加入购物车</button>\n              </div>\n            </div>\n          </router-link>\n        </ul>\n      </div>\n    </div>\n</template>\n\n<script>\n\n    import Header from \"../base/Header\"\n    import {getList,removeBook,pagination} from \"../api\";\n    import * as Types from '../store/mutations-type';\n\n    export default {\n        created() {\n          this.getData();\n        },\n        data() {\n            return {\n              list: [],\n              offset: 0,\n              hasMore: true\n            }\n        },\n        methods: {\n          add(book) {\n            this.$store.commit(Types.ADDCART, book);\n          },\n          async remove(id) {\n            await removeBook(id);\n            this.list = this.list.filter(item => item.bookId !== id);\n          },\n          async getData() {\n            let {hasMore, books} = await pagination(this.offset);\n            this.hasMore = hasMore;\n            this.list = [...this.list, ...books];\n          },\n          more() {\n            if (!this.hasMore) return;\n            this.offset += 5;\n            this.getData();\n          },\n          getMore() {\n            let {scrollHeight,scrollTop,clientHeight} = this.$refs.list;\n            if (scrollTop + clientHeight + 20 > scrollHeight) {\n              this.more();\n            }\n          }\n        },\n        computed: {},\n        components: {\n          Header\n        },\n    }\n</script>\n\n<style scoped lang=\"less\">\n  .box{\n    position: absolute;\n    top: 40px;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    overflow: auto;\n    margin-bottom: 40px;\n    ul{\n      margin: 0;\n      padding: 0 5px;\n      li{\n        display: flex;\n        margin: 20px auto;\n        line-height: 25px;\n        padding-bottom: 5px;\n        border-bottom: 1px solid #e1e1e1;\n        p{\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 3;\n          overflow: hidden;\n          font-size: 16px;\n          height: 80px;\n        }\n        button{\n          display: inline-block;\n          margin-top: 5px;\n          width: 50px;\n          height: 20px;\n          line-height: 20px;\n          border: none;\n          outline: none;\n          background: #f40;\n          color: #fff;\n          border-radius: 10px;\n        }\n        button.cart{\n          margin-left: 100px;\n          width: 80px;\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header',{attrs:{\"back\":false}},[_vm._v(\"列表\")]),_vm._v(\" \"),_c('div',{ref:\"list\",staticClass:\"box\",on:{\"scroll\":_vm.getMore}},[_c('ul',_vm._l((_vm.list),function(item,index){return _c('router-link',{key:index,attrs:{\"to\":{name:'detail',params:{bid:item.bookId}},\"tag\":\"li\"}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.bookPic),expression:\"item.bookPic\"}]}),_vm._v(\" \"),_c('div',[_c('h5',[_vm._v(_vm._s(item.bookName))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.bookInfo))]),_vm._v(\" \"),_c('b',[_vm._v(\"￥\"+_vm._s(item.bookPrice))]),_vm._v(\" \"),_c('div',[_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.remove(item.bookId)}}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('button',{staticClass:\"cart\",on:{\"click\":function($event){$event.stopPropagation();return _vm.add(item)}}},[_vm._v(\"加入购物车\")])])])])}),1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2f899eb6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f899eb6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f899eb6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f899eb6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/List.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}